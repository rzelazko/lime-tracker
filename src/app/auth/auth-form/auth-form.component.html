<section class="auth-form" fxLayoutAlign="center center">
  <form #authForm="ngForm" (ngSubmit)="onSubmit(authForm)">
    <mat-card>
      <mat-card-header>
        <mat-card-title>
          <div fxFlex fxLayoutAlign="start center">
            <mat-icon svgIcon="logo" class="logo"></mat-icon>
            <span>Lime Tracker</span>
          </div>
        </mat-card-title>
        <mat-card-subtitle *ngIf="!signUpMode"
          >Welcome again!</mat-card-subtitle
        >
        <mat-card-subtitle *ngIf="signUpMode"
          >Register to the best epilepsy journal!</mat-card-subtitle
        >
      </mat-card-header>
      <img *ngIf="imageUrl"
        mat-card-image
        [src]="imageUrl"
      />
      <mat-card-content fxLayout="column" fxLayoutGap="1rem">
        <mat-form-field>
          <input
            type="email"
            name="email"
            id="email"
            placeholder="Your email"
            email
            required
            matInput
            ngModel
            #emailInput="ngModel"
          />
          <mat-error *ngIf="emailInput.hasError('required')"
            >Email is required</mat-error
          >
          <mat-error *ngIf="!emailInput.hasError('required')"
            >Email is invalid</mat-error
          >
        </mat-form-field>
        <mat-form-field>
          <input
            type="password"
            name="password"
            id="password"
            placeholder="Your password"
            required
            minlength="6"
            matInput
            ngModel
            #passwordInput="ngModel"
          />
          <mat-error *ngIf="!signUpMode">Please provide valid passowrd</mat-error>
          <mat-error *ngIf="signUpMode">Has to be at least 6 characters long</mat-error>
        </mat-form-field>
        <mat-form-field *ngIf="signUpMode">
          <input
            type="password"
            name="confirm-password"
            id="confirm-password"
            placeholder="Confirm password"
            required
            [compareValidator]="passwordInput"
            matInput
            ngModel
            #confirmPasswordInput="ngModel"
          />
          <mat-error *ngIf="confirmPasswordInput.hasError('required')"
            >Confirm password is required</mat-error
          >
          <mat-error *ngIf="!confirmPasswordInput.hasError('required')"
            >Password and confirm password must be the same</mat-error
          >
        </mat-form-field>
      </mat-card-content>
      <mat-card-actions>
        <button
          type="submit"
          mat-raised-button
          color="primary"
          [disabled]="!authForm.valid"
        >
          {{ signUpMode ? "Register" : "Login" }}
        </button>
      </mat-card-actions>
    </mat-card>
  </form>
</section>
