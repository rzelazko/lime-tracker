<section fxLayoutAlign="center center">
  <mat-card>
    <mat-card-header>
      <mat-card-title>
        <div fxFlex fxLayoutAlign="start center">
          <mat-icon svgIcon="logo" class="logo"></mat-icon>
          <span>Lime Tracker</span>
        </div>
      </mat-card-title>
      <mat-card-subtitle>Almoast there</mat-card-subtitle>
    </mat-card-header>
    <img
      mat-card-image
      width="400"
      height="200"
      src="https://source.unsplash.com/random/400x200/?limes"
    />

    <ng-container *ngIf="auth.userData$ | async as userData; else loading">
      <mat-card-content>
        <h1>Thank You for Registering!</h1>

        <p>We have sent a confirmation email.</p>

        <p class="userData">
          To <span>{{ userData.email }}</span>.
        </p>

        <p class="userData" *ngIf="userData.emailVerificationSent">
          At <span>{{ userData.emailVerificationSent | moment: "LLL" }}</span>.
          <small>Resend possible after an hour.</small>
        </p>

        <p>Please check your email and click on the link to verify your email address.</p>
      </mat-card-content>

      <mat-card-actions>
        <ng-container *ngIf="oneHourAgo$ | async as hourAgo">
          <button
            mat-raised-button
            color="secondary"
            (click)="onEmailSend()"
            *ngIf="userData.emailVerificationSent && userData.emailVerificationSent.isBefore(hourAgo)"
          >
            Re-send confirmation email
          </button>
        </ng-container>

        <a mat-raised-button color="secondary" routerLink="/logout"> Log in </a>
      </mat-card-actions>
    </ng-container>

    <ng-template #loading>
      <mat-card-content>
        <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
      </mat-card-content>
    </ng-template>
  </mat-card>
</section>
