<section fxLayoutAlign="center center">
  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" #formDirective="ngForm">
    <mat-card>
      <mat-card-header>
        <mat-card-title>
          <div fxFlex fxLayoutAlign="start center">
            <mat-icon svgIcon="logo" class="logo"></mat-icon>
            <span>Lime Tracker</span>
          </div>
        </mat-card-title>
        <mat-card-subtitle>Welcome again!</mat-card-subtitle>
      </mat-card-header>

      <img
        mat-card-image
        width="400"
        height="200"
        src="https://source.unsplash.com/random/400x200/?lime"
      />

      <ng-container *ngIf="isLoading">
        <mat-card-content fxLayout="column" fxLayoutGap="1rem" fxLayoutAlign="center center">
          <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
        </mat-card-content>
      </ng-container>

      <ng-container *ngIf="!isLoading">
        <!-- form body -->

        <mat-card-content fxLayout="column" fxLayoutGap="1rem">
          <mat-error *ngIf="error">
            <ng-container [ngSwitch]="error">
              <span *ngSwitchCase="'auth/network-request-failed'">
                Connection to backend failed. Please try again, and if the problem persists, contact
                the <a href="https://www.webperfekt.pl/">administrator</a>.
              </span>
              <span *ngSwitchDefault>Authentication failed - please provide valid credentials</span>
            </ng-container>
          </mat-error>

          <mat-form-field>
            <input
              type="email"
              id="email"
              formControlName="email"
              placeholder="Your email"
              matInput
            />
            <mat-error *ngIf="hasError('email', 'required')">Email is required</mat-error>
            <mat-error *ngIf="!hasError('email', 'required')">Email is invalid</mat-error>
          </mat-form-field>

          <mat-form-field>
            <input
              type="password"
              id="password"
              formControlName="password"
              placeholder="Your password"
              matInput
            />
            <mat-error>Please provide valid passowrd</mat-error>
          </mat-form-field>
        </mat-card-content>
        <mat-card-actions>
          <button type="submit" mat-raised-button color="primary" [disabled]="!loginForm.valid">
            Log in
          </button>
        </mat-card-actions>

        <!-- /form body -->
      </ng-container>
    </mat-card>
  </form>
</section>
