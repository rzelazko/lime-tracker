<ng-container *ngIf="{options: chartOptions$ | async, error: chartError$ | async} as chart">
  <apx-chart
    *ngIf="!chart.error && chart.options; else loading"
    [series]="chart.options.series"
    [xaxis]="chart.options.xaxis"
    [yaxis]="chart.options.yaxis"
    [title]="chart.options.title"
    [subtitle]="chart.options.subtitle"
    [chart]="{height: '350', type: 'line', toolbar: {show: false}, zoom: {enabled: false}}"
    [markers]="{size: [6, 6]}"
    [stroke]="{width: [1, 1, 4]}"
    [dataLabels]="{enabled: false}"
    [fill]="{type: 'solid'}"
    [tooltip]="{shared: false, intersect: true}"
    [legend]="{show: true}"
  ></apx-chart>
  <app-error-card [error]="chart.error" *ngIf="chart.error"></app-error-card>

  <ng-template #loading>
    <mat-progress-spinner *ngIf="!chart.error" mode="indeterminate"></mat-progress-spinner>
  </ng-template>
</ng-container>
